<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ SERVER_NAME }}</title>
  <link rel="icon" type="image/webp" href="{{ url_for('static', filename='favicon.webp') }}" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
    {% include "_bottom_nav.html" %}
    <div class="container medialists-container" style="max-width: 1600px; width: 95vw; margin: 0 auto;">
        <h1>Media Lists</h1>
        <div class="library-grid">
        {% for lib_name, groups in library_media.items() %}
            <div class="library-col">
                <h3>{{ lib_name }}</h3>
                {% if groups %}
                    {% for letter, titles in groups.items() %}
                        <details>
                            <summary class="collapsible-heading">{{ letter }}</summary>
                            <ul>
                                {% for title in titles %}
                                    <li>
                                        {{ title }} -
                                        <a href="https://www.imdb.com/find/?q={{ title | urlencode }}" target="_blank">IMDB</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </details>
                    {% endfor %}
                {% else %}
                    <p class="muted">No items found in this library.</p>
                {% endif %}
            </div>
        {% endfor %}
        </div>
        {% if abs_enabled and audiobooks %}
          <div>
            <h3>Audiobooks</h3>
            {% for author, books in audiobooks.items() %}
              <p style="font-weight: bold; margin-top: 1em;">{{ author }}</p>
              <ul>
                {% for book in books %}
                  <li>
                    {{ book }} -
                    <a href="https://www.goodreads.com/search?q={{ book | urlencode }}" target="_blank">Goodreads</a>
                  </li>
                {% endfor %}
              </ul>
            {% endfor %}
          </div>
        {% endif %}
        <style>
        .library-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2em;
            align-items: flex-start;
        }
        .library-col {
            min-width: 0;
            max-width: 350px;
            background: #232323;
            border-radius: 8px;
            padding: 1em 1.2em;
            box-shadow: 0 2px 8px #0002;
        }
        @media (max-width: 900px) {
            .library-grid {
                grid-template-columns: 1fr;
            }
        }
        </style>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
          const select = document.getElementById("list-select");
          const movies = document.getElementById("movies-list");
          const shows = document.getElementById("shows-list");
          const audiobooks = document.getElementById("audiobooks-list");
      
          function hideAll() {
            movies.style.display = "none";
            shows.style.display = "none";
            if (audiobooks) audiobooks.style.display = "none";
          }
      
          select.addEventListener("change", function () {
            hideAll();
            const value = select.value;
            if (value === "movies") movies.style.display = "block";
            else if (value === "shows") shows.style.display = "block";
            else if (value === "audiobooks" && audiobooks) audiobooks.style.display = "block";
          });
        });
      </script>
      
</body>
</html>
